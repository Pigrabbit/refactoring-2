# Chapter 6

가장 기본적이고 많이 사용해서 제일 먼저 배워야 하는 리팩터링들로 시작한다.

## Extract Function

코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.

코드를 언제 독립된 함수로 묶어야 할지에 관한 의견은 수없이 많다.
**목적과 구현**을 분리하는 방식이 합리적으로 보인다.
함수로 추출한 뒤 '무슨 일'에 걸맞는 이름을 지으면 나중에 코드를 ㄹ다시 읽을 때 함수의 목적이 눈에 확 들어온다.

분리해낸 함수의 길이는 크게 중요하지 않다.
'목적'과 '구현'의 간극이 크면 클수록 extract method의 효용은 커진다.

### Procedure

1. 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다. 이 때 '어떻게'가 아닌 '무엇'을 하는지가 드러나야 한다.
2. 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다.
3. 추출한 코드 중 원본 함수의 지역변수를 참조하거나 추출한 함수의 유효범위를 벗어나는 변수는 없는지 검사한다. (있다면 매개변수로 전달한다.)
4. 변수를 다 처리했다면 컴파일한다.
5. 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다.
6. 테스트한다.
7. 다른 코드에 추출한 코드가 반복되지는 않는지 확인한다. 있다면 추출한 함수로 교체할지 검토한다.

## Inline Function

때로는 함수 본문이 이름만큼이나 명확한 경우도 있다. 이럴 때는 그 함수를 제거한다. 
리팩터링 과정에서 잘못 추출된 함수들도 다시 인라인한다.
간접 호출을 너무 과하게 쓰는 코드도 흔한 인라인 대상이다.

### Procedure

1. Polymorphic Method인지 확인한다.
2. 인라인할 함수를 호출하는 곳을 모두 찾는다.
3. 각 호출문을 함수 본문으로 교체한다.
4. 하나씩 교체할 때마다 테스트한다.
5. function declartion을 삭제한다.

핵심은 항상 단계를 잘게 나눠서 처리하는 데 있다.
